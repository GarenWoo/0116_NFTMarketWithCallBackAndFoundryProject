# 练习题（01.16）

## 01.16 包含 4 个练习题：

### 练习题 1 ：改写 01.15 NFTMarket 合约，向其中加入 tokenReceived 方法：当用户向 NFTMarket 转入 token 时，自动购买 NFT

[点击访问练习题 1](./0116_NFTMarketWithTokenReceived)



### **练习题 2 ：**

1. **Managing Your DAPP Project with Foundry.**
2. **Try using the Foundry test your bank.sol (option).**

[点击访问练习题 2](./0116_DappManagedByFoundry)



### **练习题 3 ：**

**Decode data:**

**Tx1 calldata**

```
0xa9059cbb0000000000000000000000005494befe3ce72a2ca0001fe0ed0c55b42f8c358f000000000000000000000000000000000000000000000000000000000836d54c
```

**Tx2 calldata**

```
0xb24614f2000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec70000000000000000000000007c92b8efbcf4ca58a6d877f35ab78aaa0d3d13bf0000000000000000000000000000000000000000000000000000000017d7840000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000
```

**答：**

- **Tx1 calldata 解析如下：**
  - 0xa9059cbb = "transfer(address,uint256)"
  - 0x0000000000000000000000005494befe3ce72a2ca0001fe0ed0c55b42f8c358f = 账户地址 "0x5494befe3ce72a2ca0001fe0ed0c55b42f8c358f"
  - 0x000000000000000000000000000000000000000000000000000000000836d54c = 转账的 token 数额 137811276

- **Tx2 calldata 解析如下：**
  - 0xb24614f2 = "sendToInjective(address,bytes32,uint256,string)"
  - 0x000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec7 = 账户地址"0xdac17f958d2ee523a2206206994597c13d831ec7"
  - 0x0000000000000000000000007c92b8efbcf4ca58a6d877f35ab78aaa0d3d13bf = 定长字节序列 bytes32 的值
  - 0x0000000000000000000000000000000000000000000000000000000017d78400 = 400000000
  - 0x0000000000000000000000000000000000000000000000000000000000000080 =  string 类型参量的起始位置位于 slot 4 (0x80 = 128, 128/32 = 4)  
  - 0x0000000000000000000000000000000000000000000000000000000000000000 = string 的值为空（""）



### 练习题 4：

**What does this log tell us about what happened?**

```json
{
  "address":"0x33fd426905f149f8376e227d0c9d3340aad17af1",
  "topics":["0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62","0x0000000000000000000000001e0049783f008a0085193e00003d00cd54003c71","0x000000000000000000000000111818a51c4177e8980566beea68fe334be7b76a","0x00000000000000000000000091aa2610067019cb9930106d1fae7998ba1e73ee"], "data":"0x000000000000000000000000000000000000000000000000000000000000003c0000000000000000000000000000000000000000000000000000000000000001",
  "blockHash":"...",
  "blockNumber":"...",
  "transactionHash":"...",
  "transactionIndex":"0x7f",
  "logIndex":"0x22e",
  "removed":false
}
```

**Topics 部分：**

**topic[0]**: 0xc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62 = "TransferSingle(address,address,address,uint256,uint256)"

**topic[1]**: 0x0000000000000000000000001e0049783f008a0085193e00003d00cd54003c71 = 地址0x1E0049783F008A0085193E00003D00cd54003c71

**topic[2]**: 0x000000000000000000000000111818a51c4177e8980566beea68fe334be7b76a = 地址0x111818A51C4177E8980566beEA68fe334bE7B76A

**topic[3]**: 0x00000000000000000000000091aa2610067019cb9930106d1fae7998ba1e73ee = 地址 0x91Aa2610067019Cb9930106D1FAe7998bA1E73ee

**data 部分**: 

- 0x000000000000000000000000000000000000000000000000000000000000003c = 60

- 0x0000000000000000000000000000000000000000000000000000000000000001 = 1



